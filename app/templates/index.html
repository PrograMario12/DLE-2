{% extends './base/base.html' %} {% block styles %}

<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/login_styles.css') }}"
/>
{% endblock %} {% block content %}
<div class="industrial-layout">
  <!-- 1. Top: Clock (Smaller) -->
  <header class="top-bar">
    <div class="reloj-container" role="timer" aria-live="polite">
      <span id="tiempo">00 : 00</span>
    </div>
  </header>

  <!-- 2. Center: Main Input Block -->
  <main class="main-scan-area">
    <div class="scan-card">
      <picture>
        <source
          srcset="{{ url_for('static', filename='img/magna-logo.png') }}"
        />
        <img
          src="{{ url_for('static', filename='img/magna-logo.png') }}"
          alt="Logo de la empresa"
          class="company-logo"
        />
      </picture>

      <form
        method="post"
        action="{{ url_for('main.menu_station') }}"
        id="login-form"
        class="scan-form"
        autocomplete="off"
      >
        <div class="input-wrapper">
          <label for="employee_number" class="sr-only"
            >NÃºmero de empleado</label
          >
          <input
            type="password"
            class="scan-input"
            name="employee_number"
            id="employee_number"
            required
            autofocus
            autocomplete="new-password"
            minlength="10"
            inputmode="numeric"
            pattern="[0-9]{10}"
            placeholder="ESCANEAR TARJETA"
            oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 10)"
          />
        </div>

        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %}
        <div class="messages-container">
          {% for category, message in messages %}
          <div class="alert alert-{{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
        {% endif %} {% endwith %}
      </form>

      <!-- 3. Line Info (Immediately below input) -->
      <div class="line-info-display">
        <span class="line-label">LÃ­nea Actual:</span>
        <h2 class="line-value {{ 'no-line-selected' if not line else '' }}">
          {{ line if line else 'âš ï¸ SELECCIONAR LÃNEA' }}
        </h2>
      </div>
    </div>
  </main>

  <!-- 4. Bottom: Status & Actions -->
  <footer class="industrial-footer">
    <div class="system-status">
      <span class="status-indicator">ğŸŸ¢</span>
      <span class="status-text">Sistema Listo</span>
    </div>

    <nav class="admin-actions">
      <a class="btn-industrial" href="{{ url_for('main.employees_list') }}">
        ğŸ‘¤ Personal
      </a>

      <a
        class="btn-industrial"
        href="{{ url_for('settings.configure_line_and_station') }}"
      >
        ğŸ› ï¸ Cambiar lÃ­nea de producciÃ³n
      </a>

      <a
        class="btn-industrial"
        href="{{ url_for('dashboards.show_lines_dashboard') }}"
      >
        ğŸ“Š Tableros
      </a>
    </nav>
  </footer>

  <script src="{{ url_for('static', filename='js/clock.js') }}"></script>
</div>
{% endblock %}
